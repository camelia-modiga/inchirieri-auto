<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="contracte_data_nastere_trg" directorySegmentName="seg_0" id="FA216BCD-52BA-89CC-280C-7EDD68B28C29">
<createdBy>Cami</createdBy>
<createdTime>2020-12-15 17:05:11 UTC</createdTime>
<ownerDesignName>proiect_pbd</ownerDesignName>
<actions>INSERT, UPDATE</actions>
<body><![CDATA[DECLARE
	aux_date DATE;
BEGIN
	SELECT Clienti.data_nasterii
	INTO aux_date
	FROM Clienti
	WHERE Clienti.id_client=:new.id_client;
	IF( :new.data_inchiriere - aux_date < 21*365)
	THEN
		RAISE_APPLICATION_ERROR(-20001,
			'Data invalida: ' || TO_CHAR(aux_date,'DD.MM.YYYY') ||('Clientul nu are 21 de ani!!'));
	END IF;
	IF( :new.data_inchiriere - aux_date > 70*365)
	THEN
		RAISE_APPLICATION_ERROR(-20001,
			'Data invalida: ' || TO_CHAR(aux_date,'DD.MM.YYYY') ||('Clientul are 70 de ani!!'));
	END IF;
END; ]]></body>
<triggerTime>BEFORE</triggerTime>
</TriggerOraclev10g>